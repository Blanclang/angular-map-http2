"Id";"PathName";"Method";"Status";"Content";"IsSystem";"CreateTime";"IsTokenAccess";"Bewrite"
1;"/webapi/demo";"get";1;"{""rules"": [{""id"": 1, ""sql"": ""select * from xtn_userinfo where username = ':username' and password = ':password'"", ""name"": ""admininfo"", ""type"": ""query"", ""isRows"": false}, {""id"": 100, ""sql"": ""select count(1) total, sex,cityname,age from xtn_userinfo where id = :id_judge"", ""name"": ""judgeInfo_100"", ""type"": ""query"", ""isRows"": false, ""isMergeOption"": true}, {""id"": 10, ""sql"": """", ""type"": ""judge"", ""judgeInfo"": {""failMsg"": ""用户存在"", ""strByThis"": ""if((this.sex === '男' && this.cityname == '上海' ) || (this.age > 30 && this.cityname !== '北京')){return true;}return false;"", ""strByEval1"": ""(':sex' !== '男' && ':cityname' == '北京' ) || (:age > 30 && ':cityname' !== '北京')"", ""chilrenRules"": [{""id"": 11, ""sql"": ""select * from xtn_userinfo where sex = ':sex'"", ""name"": ""peoples_sex"", ""type"": ""query"", ""isRows"": true}, {""id"": 12, ""sql"": ""select * from xtn_userinfo where sex = ':sex' and cityname = ':cityname' "", ""name"": ""peoples_sex_city"", ""type"": ""query"", ""isRows"": true}]}}, {""id"": 2, ""sql"": ""select * from xtn_userinfo where id> :id"", ""name"": ""userlist"", ""type"": ""query"", ""isRows"": true}, {""id"": 3, ""type"": ""beginTran""}, {""id"": 4, ""sql"": ""update xtn_userinfo t set t.tel=':tel' where t.id = :id1"", ""name"": ""update_info"", ""type"": ""update"", ""isRows"": false}, {""id"": 5, ""sql"": ""select * from xtn_userinfo where id = :id1"", ""name"": ""id1_info"", ""type"": ""query"", ""isRows"": false}, {""id"": 6, ""sql"": ""insert into xtn_userinfo(username,password,tel,address) values(uuid_short(),md5(now()),':tel','哈哈');"", ""name"": ""InsertNo"", ""type"": ""insert""}, {""id"": 7, ""sql"": ""select * from xtn_userinfo t where t.id = :InsertNo"", ""name"": ""insert_result11"", ""type"": ""query"", ""isRows"": false}, {""id"": 9, ""sql"": ""select count(1) total from xtn_userinfo "", ""name"": ""insert_total1"", ""type"": ""query"", ""isRows"": false}, {""id"": 10, ""sql"": ""delete from xtn_userinfo where id = :InsertNo - 5"", ""name"": ""delete_result"", ""type"": ""delete""}, {""id"": 11, ""type"": ""commit""}, {""id"": 13, ""sql"": ""select count(1) total from xtn_userinfo "", ""name"": ""insert_total2"", ""type"": ""query"", ""isRows"": false}], ""fields"": ""username,password,id,tel,id1,id_judge"", ""result"": 1}";1;"2017-07-09 11:44:41";0;"接口试例"
2;"/webapi/manager/api/list";"get";1;"{""rules"": [{""id"": 1, ""sql"": ""select \n(case t.status when 1 then '启用' when 0 then '禁用' end) StatusCn,\n(case t.Method when 'get' then '查询' when 'post' then '添加' when 'put' then '修改' else '删除' end) MethodCn,\nt.* from sys_rule t;"", ""type"": ""query"", ""isRows"": true}], ""fields"": """", ""result"": 1}";1;"2017-07-16 14:01:56";1;"接口列表"
3;"/webapi/manager/api/info";"delete";1;"{""rules"": [{""id"": 1, ""sql"": ""select count(1) total, IsSystem from sys_rule t where t.id = :Id"", ""type"": ""query"", ""isMergeOption"": true}, {""id"": 2, ""type"": ""judge"", ""judgeInfo"": {""failMsg"": ""系统规则不能删除"", ""strByThis"": ""if(this.IsSystem===1){return false;}return true;""}}, {""id"": 3, ""sql"": ""delete from sys_rule where Id = :Id"", ""type"": ""delete""}], ""fields"": ""Id"", ""result"": 1}";1;"2017-07-26 00:22:03";1;"删除接口"
4;"/webapi/manager/api/add";"post";1;"{""rules"": [{""id"": 1, ""sql"": """", ""type"": ""judge"", ""judgeInfo"": {""strByThis"": ""if(this.Id>0){return false;}return true;"", ""resultIndex"": 101, ""chilrenRules"": [{""id"": 100, ""sql"": ""update sys_rule set PathName = ':PathName', Method = ':Method',\nIsTokenAccess= :IsTokenAccess, Status = :Status, Bewrite = ':Bewrite',\nContent = ':RuleInfo' \nwhere id = :Id"", ""type"": ""update"", ""judgeInfo"": {}}, {""id"": 101, ""sql"": ""select \n(case t.status when 1 then '启用' when 0 then '禁用' end) StatusCn,\n(case t.Method when 'get' then '查询' when 'post' then '添加' when 'put' then '修改' else '删除' end) MethodCn,\nt.* from sys_rule t where t.id = :Id"", ""name"": ""rule_info"", ""type"": ""query"", ""judgeInfo"": {}}]}}, {""id"": 2, ""sql"": ""select count(1) total,t.id RuleId from sys_rule t where t.PathName = ':PathName' and t.Method = ':Method'"", ""type"": ""query"", ""isMergeOption"": true}, {""id"": 3, ""type"": ""judge"", ""judgeInfo"": {""failMsg"": ""已经存在，执行更新操作。"", ""strByThis"": ""if(this.total > 0){return false;} return true"", ""resultIndex"": 301, ""chilrenRules"": [{""id"": 300, ""sql"": ""update sys_rule set PathName = ':PathName', Method = ':Method',\nIsTokenAccess= :IsTokenAccess, Status = :Status, Bewrite = ':Bewrite',\nContent = ':RuleInfo' \nwhere id = :RuleId"", ""type"": ""update"", ""judgeInfo"": {}}, {""id"": 301, ""sql"": ""select \n(case t.status when 1 then '启用' when 0 then '禁用' end) StatusCn,\n(case t.Method when 'get' then '查询' when 'post' then '添加' when 'put' then '修改' else '删除' end) MethodCn,\nt.* from sys_rule t where t.id = :RuleId"", ""name"": ""rule_info"", ""type"": ""query"", ""judgeInfo"": {}}]}}, {""id"": 4, ""sql"": ""INSERT INTO sys_rule (PathName,Method,Status,IsTokenAccess,Bewrite,Content)\nVALUES(':PathName', ':Method', :Status, :IsTokenAccess, ':Bewrite', ':RuleInfo')"", ""name"": ""InsertNo"", ""type"": ""insert""}, {""id"": 5, ""sql"": ""select \n(case t.status when 1 then '启用' when 0 then '禁用' end) StatusCn,\n(case t.Method when 'get' then '查询' when 'post' then '添加' when 'put' then '修改' else '删除' end) MethodCn,\nt.* from sys_rule t where t.id = :InsertNo"", ""name"": ""rule_info"", ""type"": ""query""}], ""fields"": ""PathName,Method,Status,RuleInfo,Id,IsTokenAccess,Bewrite"", ""result"": 5}";1;"2017-07-28 00:07:15";1;"接口修改、插入，接口不存在就插入，存入就修改"
5;"/webapi/manager/api/info";"put";1;"{""rules"": [{""id"": 1, ""sql"": ""update sys_rule set PathName = ':PathName', Method = ':Method',\nIsTokenAccess= :IsTokenAccess, Status = :Status, Bewrite = ':Bewrite',\nContent = ':RuleInfo' \nwhere id = :Id"", ""type"": ""update""}, {""id"": 2, ""sql"": ""select \n(case t.status when 1 then '启用' when 0 then '禁用' end) StatusCn,\n(case t.Method when 'get' then '查询' when 'post' then '添加' when 'put' then '修改' else '删除' end) MethodCn,\nt.* from sys_rule t where t.id = :Id"", ""name"": ""rule_info"", ""type"": ""query""}], ""fields"": ""PathName,Method,Status,RuleInfo,Id,IsTokenAccess,Bewrite"", ""result"": 2}";1;"2017-07-28 00:09:06";1;"修改接口"
7;"/webapi/userinfo/user";"delete";1;"{""rules"": [{""id"": 1, ""sql"": ""delete from xtn_userinfo where id = :id "", ""type"": ""delete""}], ""fields"": ""id"", ""result"": 1}";0;"2017-07-16 13:32:39";1;"删除用户，传用户id参数"
8;"/webapi/userinfo/register";"post";1;"{""rules"": [{""id"": 1, ""sql"": ""select count(1) total from xtn_userinfo t where t.username = ':UserName'"", ""name"": ""user_total"", ""type"": ""query"", ""isMergeOption"": true}, {""id"": 2, ""type"": ""judge"", ""judgeInfo"": {""failMsg"": ""用户已存在！！"", ""strByEval"": """", ""strByThis"": ""if(this.total>0){return false;}return true;""}}, {""id"": 3, ""sql"": ""insert into xtn_userinfo\n(username,password,tel,address,sex,age,cityname) values\n(':UserName',':Password',':Tel',':Address','男',floor( 15 + rand()*50),'北京')"", ""type"": ""insert""}], ""fields"": ""UserName,Password,Tel,Address"", ""result"": 1}";0;"2017-07-26 00:08:35";0;"用户注册，如果用户名已经存在，提示用户名已存在。否则注册成功"
10;"/webapi/userinfo/login";"post";1;"{""rules"": [{""id"": 1, ""sql"": ""select count(1) total,id,concat('xtn_',md5(username),'_',md5(password))token, username,sex,cityname,age from xtn_userinfo t where t.username = ':username' and t.password = ':password'"", ""type"": ""query"", ""isMergeOption"": true}, {""id"": 2, ""type"": ""judge"", ""judgeInfo"": {""failMsg"": ""用户名或密码不正确"", ""strByEval"": """", ""strByThis"": ""if(this.total<=0){return false;}return true""}}, {""id"": 3, ""sql"": ""delete from sys_session where token = ':token' ;"", ""type"": ""delete""}, {""id"": 3, ""sql"": ""insert into sys_session(token,UserId,deadline)values(':token',:id, date_add( current_timestamp,interval 1 month)) ; "", ""type"": ""insert""}], ""fields"": ""username,password"", ""result"": 1}";0;"2017-07-27 23:55:02";0;"用户登录,修改username,password参数"
11;"/webapi/userinfo/users";"get";1;"{""rules"": [{""id"": 1, ""sql"": ""select * from xtn_userinfo t order by t.id desc"", ""name"": ""UserList"", ""type"": ""query"", ""isRows"": ""true""}], ""fields"": """", ""result"": 1}";0;"2017-07-09 20:45:32";1;"用户列表"
12;"/webapi/base/area";"get";1;"{""rules"": [{""id"": 1, ""sql"": ""select t.AreaId,t.ParentId,t.AreaName from xtn_base_area t "", ""name"": ""AreaList"", ""type"": ""query"", ""isRows"": true}], ""result"": 1}";0;"2017-07-30 10:01:09";0;"省市区接口"
13;"/webapi/base/AreaById";"get";1;"{""rules"": [{""id"": 1, ""sql"": ""select t.AreaId,t.ParentId,t.AreaName from xtn_base_area t where t.ParentId = :Id"", ""name"": ""AreaList"", ""type"": ""query"", ""isRows"": true}], ""fields"": ""Id"", ""result"": 1}";0;"2017-07-30 10:06:42";0;"根据ID获取对应的省，市区等信息"
14;"/webapi/map/place";"post";1;"{""rules"": [{""id"": 1, ""sql"": ""insert into xtn_map_place(userId,Latitude,Longitude,BeginDate,EndDate,Address)values\n(:UserId,':Latitude',':Longitude',':BeginDate',':EndDate',':Address')"", ""name"": ""InsertNo"", ""type"": ""insert""}, {""id"": 2, ""sql"": ""select * from xtn_map_place t where t.id = :InsertNo"", ""name"": ""map_place"", ""type"": ""query""}], ""fields"": ""UserId,Address,BeginDate,EndDate,Latitude,Longitude"", ""result"": 2}";0;"2017-08-01 00:36:48";1;"添加聚会点接口"
